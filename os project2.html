<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Page Replacement Algorithm Simulator</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #6c5ce7;
            --secondary: #a29bfe;
            --accent: #fd79a8;
            --light: #f8f9fa;
            --dark: #2d3436;
            --success: #00b894;
            --info: #0984e3;
            --warning: #fdcb6e;
            --danger: #d63031;
            --bg-gradient: linear-gradient(135deg, #6c5ce7 0%, #a29bfe 100%);
        }
        
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }
        
        body {
            font-family: 'Poppins', sans-serif;
            background-color: #f5f6fa;
            color: var(--dark);
            line-height: 1.6;
            min-height: 100vh;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        header {
            background: var(--bg-gradient);
            color: white;
            padding: 2rem 0;
            text-align: center;
            box-shadow: 0 4px 20px rgba(108, 92, 231, 0.3);
            margin-bottom: 2rem;
            position: relative;
            overflow: hidden;
        }
        
        header::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" preserveAspectRatio="none"><path fill="rgba(255,255,255,0.05)" d="M0,0 L100,0 L100,100 Q50,80 0,100 L0,0 Z"></path></svg>');
            background-size: 100% 100%;
            opacity: 0.3;
        }
        
        .header-content {
            position: relative;
            z-index: 1;
        }
        
        .lpu-logo {
            position: absolute;
            top: 20px;
            right: 20px;
            height: 60px;
            z-index: 2;
        }
        
        .student-info {
            position: absolute;
            top: 20px;
            left: 20px;
            text-align: left;
            z-index: 2;
            background: rgba(255, 255, 255, 0.2);
            padding: 10px 15px;
            border-radius: 8px;
            font-size: 0.9rem;
        }
        
        h1 {
            margin: 0;
            font-size: 2.8rem;
            font-weight: 600;
            position: relative;
            z-index: 1;
            text-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        .subtitle {
            font-size: 1.2rem;
            opacity: 0.9;
            margin-top: 0.5rem;
            position: relative;
            z-index: 1;
            font-weight: 300;
        }
        
        .card {
            background: white;
            border-radius: 12px;
            box-shadow: 0 8px 30px rgba(0, 0, 0, 0.08);
            padding: 2rem;
            margin-bottom: 2rem;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            border: none;
            position: relative;
            overflow: hidden;
        }
        
        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.12);
        }
        
        .card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 4px;
            height: 100%;
            background: var(--primary);
            transition: width 0.3s ease;
        }
        
        .card:hover::before {
            width: 8px;
        }
        
        .card-title {
            font-size: 1.5rem;
            margin-top: 0;
            margin-bottom: 1.5rem;
            color: var(--primary);
            font-weight: 600;
            position: relative;
            display: inline-block;
        }
        
        .card-title::after {
            content: '';
            position: absolute;
            bottom: -8px;
            left: 0;
            width: 50px;
            height: 3px;
            background: var(--accent);
            border-radius: 3px;
        }
        
        .form-group {
            margin-bottom: 1.5rem;
        }
        
        label {
            display: block;
            margin-bottom: 0.75rem;
            font-weight: 500;
            color: var(--dark);
        }
        
        input, select {
            width: 100%;
            padding: 0.75rem 1rem;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 1rem;
            transition: all 0.3s;
            font-family: 'Poppins', sans-serif;
        }
        
        input:focus, select:focus {
            outline: none;
            border-color: var(--accent);
            box-shadow: 0 0 0 4px rgba(253, 121, 168, 0.2);
        }
        
        .btn {
            display: inline-block;
            background: var(--bg-gradient);
            color: white;
            padding: 0.85rem 2rem;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 600;
            transition: all 0.3s;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            position: relative;
            overflow: hidden;
            box-shadow: 0 4px 15px rgba(108, 92, 231, 0.3);
        }
        
        .btn::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, rgba(255,255,255,0.3) 0%, rgba(255,255,255,0) 100%);
            transform: translateX(-100%);
            transition: transform 0.4s ease;
        }
        
        .btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(108, 92, 231, 0.4);
        }
        
        .btn:hover::after {
            transform: translateX(0);
        }
        
        .btn-block {
            display: block;
            width: 100%;
        }
        
        .results {
            margin-top: 2rem;
            animation: fadeIn 0.5s ease forwards;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .result-card {
            background: white;
            border-radius: 12px;
            box-shadow: 0 8px 30px rgba(0, 0, 0, 0.08);
            padding: 1.5rem;
            margin-bottom: 1.5rem;
            border-left: 5px solid var(--primary);
            transition: transform 0.3s ease;
        }
        
        .result-card:hover {
            transform: scale(1.02);
        }
        
        .result-title {
            font-size: 1.3rem;
            margin-top: 0;
            margin-bottom: 0.75rem;
            color: var(--secondary);
            font-weight: 600;
        }
        
        .result-value {
            font-size: 1.8rem;
            font-weight: 700;
            color: var(--primary);
            margin: 0.5rem 0;
        }
        
        .visualization {
            margin-top: 2rem;
            overflow-x: auto;
            animation: slideUp 0.6s ease forwards;
        }
        
        @keyframes slideUp {
            from { opacity: 0; transform: translateY(30px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        table {
            width: 100%;
            border-collapse: separate;
            border-spacing: 0;
            margin-top: 1.5rem;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0,0,0,0.05);
        }
        
        th, td {
            padding: 1rem;
            text-align: center;
            border: none;
        }
        
        th {
            background-color: var(--primary);
            color: white;
            font-weight: 500;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        
        tr:nth-child(even) {
            background-color: #f8f9fa;
        }
        
        .page-fault {
            background-color: rgba(214, 48, 49, 0.1);
            font-weight: bold;
            position: relative;
        }
        
        .page-fault::after {
            content: '⚠️';
            position: absolute;
            right: 5px;
            top: 50%;
            transform: translateY(-50%);
            font-size: 0.8rem;
        }
        
        .algo-selector {
            display: flex;
            flex-wrap: wrap;
            gap: 1.5rem;
            margin-bottom: 2rem;
        }
        
        .algo-option {
            flex: 1;
            min-width: 200px;
        }
        
        .algo-option label {
            display: flex;
            align-items: center;
            padding: 0.75rem 1.25rem;
            background: white;
            border-radius: 8px;
            box-shadow: 0 3px 10px rgba(0,0,0,0.05);
            cursor: pointer;
            transition: all 0.3s;
            border: 2px solid #e0e0e0;
        }
        
        .algo-option label:hover {
            border-color: var(--accent);
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }
        
        .algo-option input[type="checkbox"] {
            width: auto;
            margin-right: 0.75rem;
            accent-color: var(--primary);
            width: 18px;
            height: 18px;
        }
        
        .best-algo {
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0% { box-shadow: 0 0 0 0 rgba(0, 184, 148, 0.4); }
            70% { box-shadow: 0 0 0 15px rgba(0, 184, 148, 0); }
            100% { box-shadow: 0 0 0 0 rgba(0, 184, 148, 0); }
        }
        
        .floating {
            animation: floating 3s ease-in-out infinite;
        }
        
        @keyframes floating {
            0% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
            100% { transform: translateY(0px); }
        }
        
        @media (max-width: 768px) {
            .algo-option {
                min-width: 100%;
            }
            
            h1 {
                font-size: 2rem;
            }
            
            .lpu-logo {
                height: 40px;
                top: 15px;
                right: 15px;
            }
            
            .student-info {
                position: static;
                margin-bottom: 15px;
                text-align: center;
                background: none;
                padding: 0;
            }
        }
    </style>
</head>
<body>
    <header class="floating">
        <div class="container">
            <!-- LPU Logo -->
            <img src="https://www.lpu.in/images/logo/logo.svg" alt="Lovely Professional University Logo" class="lpu-logo">
            
            <!-- Student Information -->
            <div class="student-info">
                <div><strong>Pakal Venkata Varun Kumar</strong> (12317771)</div>
                <div><strong>Katla Anil Kumar</strong> (12301326)</div>
            </div>
            
            <div class="header-content">
                <h1>Page Replacement Algorithm Simulator</h1>
                <p class="subtitle">Visualize and compare different page replacement algorithms</p>
            </div>
        </div>
    </header>
    
    <div class="container">
        <div class="card">
            <h2 class="card-title">Simulation Parameters</h2>
            
            <div class="form-group">
                <label for="Enter reference String">Page Reference String (comma separated numbers):</label>
                <input type="text" id="referenceString" placeholder="e.g. 1,2,3,4,1,2,5,1,2,3,4,5" >
            </div>
            
            <div class="form-group">
                <label for="frameCount">Number of Frames:</label>
                <input type="number" id="frameCount" min="1" max="20" placeholder="e.g. 3" >
            </div>
            
            <h3 class="card-title" style="margin-top: 1.5rem;">Select Algorithms to Compare</h3>
            
            <div class="algo-selector">
                <div class="algo-option">
                    <label><input type="checkbox" id="fifoCheck" checked> FIFO (First-In-First-Out)</label>
                </div>
                <div class="algo-option">
                    <label><input type="checkbox" id="lruCheck" checked> LRU (Least Recently Used)</label>
                </div>
                <div class="algo-option">
                    <label><input type="checkbox" id="optimalCheck" checked> Optimal</label>
                </div>
                <div class="algo-option">
                    <label><input type="checkbox" id="randomCheck"> Random Replacement</label>
                </div>
            </div>
            
            <button id="runSimulation" class="btn btn-block">Run Simulation</button>
        </div>
        
        <div id="resultsContainer" class="results" style="display: none;">
            <h2 class="card-title">Simulation Results</h2>
            
            <div id="summaryResults" class="card"></div>
            
            <div id="detailedResults">
                <!-- Detailed results will be inserted here -->
            </div>
        </div>
    </div>
    
    <script>
        document.getElementById('runSimulation').addEventListener('click', runSimulation);
        
        function runSimulation() {
            // Get input values
            const referenceString = document.getElementById('referenceString').value
                .split(',')
                .map(item => parseInt(item.trim()))
                .filter(item => !isNaN(item));
                
            const frameCount = parseInt(document.getElementById('frameCount').value);
            
            // Get selected algorithms
            const selectedAlgorithms = [];
            if (document.getElementById('fifoCheck').checked) selectedAlgorithms.push('FIFO');
            if (document.getElementById('lruCheck').checked) selectedAlgorithms.push('LRU');
            if (document.getElementById('optimalCheck').checked) selectedAlgorithms.push('Optimal');
            if (document.getElementById('randomCheck').checked) selectedAlgorithms.push('Random');
            
            if (selectedAlgorithms.length === 0) {
                alert('Please select at least one algorithm to run.');
                return;
            }
            
            // Add loading effect
            const btn = document.getElementById('runSimulation');
            btn.innerHTML = '<span class="loading">Running Simulation...</span>';
            btn.disabled = true;
            
            // Run simulations after a small delay to allow UI to update
            setTimeout(() => {
                const results = {};
                selectedAlgorithms.forEach(algo => {
                    results[algo] = simulateAlgorithm(algo, referenceString, frameCount);
                });
                
                // Display results
                displayResults(results, referenceString, frameCount);
                
                // Reset button
                btn.innerHTML = 'Run Simulation';
                btn.disabled = false;
            }, 100);
        }
        
        function simulateAlgorithm(algorithm, referenceString, frameCount) {
            const frames = [];
            const history = [];
            let pageFaults = 0;
            
            // Data structures for specific algorithms
            let fifoQueue = [];
            let lruLastUsed = {};
            
            // Initialize LRU tracking
            referenceString.forEach(page => {
                lruLastUsed[page] = -1;
            });
            
            // Process each page in reference string
            referenceString.forEach((page, index) => {
                currentStep = index;
                let fault = false;
                
                if (!frames.includes(page)) {
                    // Page fault occurred
                    pageFaults++;
                    fault = true;
                    
                    if (frames.length < frameCount) {
                        // There's space, just add the page
                        frames.push(page);
                        
                        // Algorithm-specific tracking
                        if (algorithm === 'FIFO') fifoQueue.push(page);
                    } else {
                        // Need to replace a page
                        let replaceIndex;
                        
                        switch (algorithm) {
                            case 'FIFO':
                                // Replace the oldest page
                                const oldest = fifoQueue.shift();
                                replaceIndex = frames.indexOf(oldest);
                                frames[replaceIndex] = page;
                                fifoQueue.push(page);
                                break;
                                
                            case 'LRU':
                                // Replace least recently used
                                let lruPage = null;
                                let minLastUsed = Infinity;
                                
                                frames.forEach(framePage => {
                                    if (lruLastUsed[framePage] < minLastUsed) {
                                        minLastUsed = lruLastUsed[framePage];
                                        lruPage = framePage;
                                    }
                                });
                                
                                replaceIndex = frames.indexOf(lruPage);
                                frames[replaceIndex] = page;
                                break;
                                
                            case 'Optimal':
                                // Replace the page not used for longest time in future
                                let farthest = -1;
                                let optimalPage = null;
                                
                                frames.forEach(framePage => {
                                    // Check when this page will be used next
                                    const nextUseIndex = referenceString.slice(index + 1).indexOf(framePage);
                                    
                                    if (nextUseIndex === -1) {
                                        // This page won't be used again, perfect candidate
                                        optimalPage = framePage;
                                        return;
                                    } else if (nextUseIndex > farthest) {
                                        farthest = nextUseIndex;
                                        optimalPage = framePage;
                                    }
                                });
                                
                                replaceIndex = frames.indexOf(optimalPage);
                                frames[replaceIndex] = page;
                                break;
                                
                            case 'Random':
                                // Replace random page
                                replaceIndex = Math.floor(Math.random() * frames.length);
                                frames[replaceIndex] = page;
                                break;
                        }
                    }
                }
                
                // Update LRU tracking
                lruLastUsed[page] = index;
                
                // Save frame state for visualization
                history.push({
                    step: index,
                    page: page,
                    frames: [...frames],
                    fault: fault
                });
            });
            
            return {
                pageFaults: pageFaults,
                history: history
            };
        }
        
        function displayResults(results, referenceString, frameCount) {
            const resultsContainer = document.getElementById('resultsContainer');
            const summaryResults = document.getElementById('summaryResults');
            const detailedResults = document.getElementById('detailedResults');
            
            // Show results container with animation
            resultsContainer.style.display = 'block';
            
            // Create summary
            let summaryHTML = '<h3 class="result-title">Summary</h3>';
            summaryHTML += '<p>Reference String: [' + referenceString.join(', ') + ']</p>';
            summaryHTML += '<p>Number of Frames: ' + frameCount + '</p>';
            
            summaryHTML += '<div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 1.5rem; margin-top: 1.5rem;">';
            
            // Find the best algorithm (least page faults)
            let bestAlgo = null;
            let minFaults = Infinity;
            
            for (const algo in results) {
                if (results[algo].pageFaults < minFaults) {
                    minFaults = results[algo].pageFaults;
                    bestAlgo = algo;
                }
            }
            
            for (const algo in results) {
                const isBest = algo === bestAlgo;
                summaryHTML += `
                    <div class="result-card ${isBest ? 'best-algo' : ''}" style="${isBest ? 'border-left-color: var(--success);' : ''}">
                        <h4 class="result-title">${algo}</h4>
                        <p class="result-value">${results[algo].pageFaults} page faults</p>
                        ${isBest ? '<p style="color: var(--success); font-weight: 600;">⭐ Best algorithm for this case</p>' : ''}
                        <p>Fault rate: ${(results[algo].pageFaults / referenceString.length * 100).toFixed(1)}%</p>
                    </div>
                `;
            }
            
            summaryHTML += '</div>';
            summaryResults.innerHTML = summaryHTML;
            
            // Create detailed results for each algorithm
            detailedResults.innerHTML = '<h3 class="card-title">Detailed Simulation Steps</h3>';
            
            for (const algo in results) {
                const algoResults = results[algo];
                
                detailedResults.innerHTML += `
                    <div class="card" style="margin-top: 2rem;">
                        <h4 style="margin-top: 0; color: var(--primary);">${algo} Algorithm</h4>
                        
                        <div class="visualization">
                            <table>
                                <thead>
                                    <tr>
                                        <th>Step</th>
                                        <th>Page</th>
                                        ${Array(frameCount).fill().map((_, i) => `<th>Frame ${i+1}</th>`).join('')}
                                        <th>Status</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    ${algoResults.history.map(step => `
                                        <tr ${step.fault ? 'class="page-fault"' : ''}>
                                            <td>${step.step + 1}</td>
                                            <td><strong>${step.page}</strong></td>
                                            ${Array(frameCount).fill().map((_, i) => 
                                                `<td>${step.frames[i] !== undefined ? 
                                                    `<span class="frame-value">${step.frames[i]}</span>` : 
                                                    '-'}</td>`
                                            ).join('')}
                                            <td>${step.fault ? '<span style="color: var(--danger);">Page Fault</span>' : 'Hit'}</td>
                                        </tr>
                                    `).join('')}
                                </tbody>
                            </table>
                        </div>
                    </div>
                `;
            }
            
            // Add animations to frame values
            setTimeout(() => {
                document.querySelectorAll('.frame-value').forEach((el, i) => {
                    el.style.display = 'inline-block';
                    el.style.animation = `fadeIn 0.5s ease ${i * 0.05}s forwards`;
                    el.style.opacity = '0';
                });
            }, 100);
            
            // Scroll to results
            resultsContainer.scrollIntoView({ behavior: 'smooth' });
        }
    </script>
</body>
</html>